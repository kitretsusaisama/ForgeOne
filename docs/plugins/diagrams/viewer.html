<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForgeOne Plugin System Diagram Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #1890ff;
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        h1 {
            margin: 0;
            font-size: 24px;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .diagram-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        button {
            background-color: #fff;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        button:hover {
            border-color: #1890ff;
            color: #1890ff;
        }
        button.active {
            background-color: #1890ff;
            color: white;
            border-color: #1890ff;
        }
        .zoom-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .diagram-container {
            background-color: white;
            border: 1px solid #d9d9d9;
            border-radius: 5px;
            padding: 20px;
            overflow: auto;
            height: 600px;
            position: relative;
        }
        .diagram-container svg {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
            transition: transform 0.3s;
        }
        .description {
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f5ff;
            border-radius: 5px;
            border-left: 4px solid #1890ff;
        }
        .description h2 {
            margin-top: 0;
            font-size: 18px;
            color: #1890ff;
        }
        .description p {
            margin-bottom: 0;
            line-height: 1.5;
        }
        footer {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
            padding: 10px;
        }
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            .zoom-controls {
                margin-top: 10px;
            }
            .diagram-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ForgeOne Plugin System Diagram Viewer</h1>
        </header>
        
        <div class="controls">
            <div class="diagram-selector">
                <button id="btn-architecture" class="active">Manager Architecture</button>
                <button id="btn-lifecycle">Plugin Lifecycle</button>
                <button id="btn-sandbox">Sandbox Architecture</button>
                <button id="btn-extension">Extension Points</button>
                <button id="btn-integration">Integration</button>
            </div>
            
            <div class="zoom-controls">
                <button id="btn-zoom-out">-</button>
                <span id="zoom-level">100%</span>
                <button id="btn-zoom-in">+</button>
                <button id="btn-reset">Reset</button>
            </div>
        </div>
        
        <div class="diagram-container" id="diagram-container">
            <!-- SVG will be loaded here -->
        </div>
        
        <div class="description" id="diagram-description">
            <h2>Plugin Manager Architecture</h2>
            <p>This diagram illustrates the layered architecture of the ForgeOne Plugin Manager, including the Plugin Interface layer, Plugin Manager Core, Runtime Layer, Security Layer, Syscall Layer, and Metrics Layer. It shows how these components interact to provide a secure, extensible plugin system.</p>
        </div>
        
        <footer>
            <p>ForgeOne Plugin System Documentation - Diagrams created for technical reference</p>
        </footer>
    </div>

    <script>
        // Diagram data
        const diagrams = {
            'architecture': {
                file: 'plugin_manager_architecture.svg',
                title: 'Plugin Manager Architecture',
                description: 'This diagram illustrates the layered architecture of the ForgeOne Plugin Manager, including the Plugin Interface layer, Plugin Manager Core, Runtime Layer, Security Layer, Syscall Layer, and Metrics Layer. It shows how these components interact to provide a secure, extensible plugin system.'
            },
            'lifecycle': {
                file: 'plugin_lifecycle.svg',
                title: 'Plugin Lifecycle',
                description: 'This diagram shows the complete lifecycle of plugins within the ForgeOne system, including the Discovery Phase, Activation Phase, Runtime Phase, and Termination Phase. It also illustrates error flows and recovery paths.'
            },
            'sandbox': {
                file: 'plugin_sandbox_architecture.svg',
                title: 'Plugin Sandbox Architecture',
                description: 'This diagram details the secure sandbox environment for plugin execution, including the Host Application and Plugin Manager integration, Sandbox Environment with isolated plugin instances, and security boundaries with memory isolation, syscall filtering, resource limiting, and attestation.'
            },
            'extension': {
                file: 'plugin_extension_points.svg',
                title: 'Plugin Extension Points',
                description: 'This diagram maps out the extension point system that allows plugins to extend ForgeOne functionality, including Core Application components, Extension Points Layer, and categorized extension points for UI, Data, Security, Runtime, Integration, and Telemetry.'
            },
            'integration': {
                file: 'plugin_integration.svg',
                title: 'Plugin Integration Architecture',
                description: 'This diagram shows how plugins integrate with the ForgeOne platform and external systems, including ForgeOne Core Platform components, Plugin Manager, Integration Layer, Plugin Types (WASM, Native, Remote), and External Systems integration paths.'
            }
        };

        // DOM elements
        const diagramContainer = document.getElementById('diagram-container');
        const diagramDescription = document.getElementById('diagram-description');
        const zoomLevel = document.getElementById('zoom-level');
        const btnZoomIn = document.getElementById('btn-zoom-in');
        const btnZoomOut = document.getElementById('btn-zoom-out');
        const btnReset = document.getElementById('btn-reset');

        // Button elements
        const btnArchitecture = document.getElementById('btn-architecture');
        const btnLifecycle = document.getElementById('btn-lifecycle');
        const btnSandbox = document.getElementById('btn-sandbox');
        const btnExtension = document.getElementById('btn-extension');
        const btnIntegration = document.getElementById('btn-integration');

        // State
        let currentDiagram = 'architecture';
        let currentZoom = 100;

        // Load diagram
        function loadDiagram(diagramKey) {
            // Update active button
            document.querySelectorAll('.diagram-selector button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`btn-${diagramKey}`).classList.add('active');

            // Load SVG
            fetch(diagrams[diagramKey].file)
                .then(response => response.text())
                .then(svgContent => {
                    diagramContainer.innerHTML = svgContent;
                    applyZoom();
                })
                .catch(error => {
                    console.error('Error loading diagram:', error);
                    diagramContainer.innerHTML = `<p>Error loading diagram: ${error.message}</p>`;
                });

            // Update description
            diagramDescription.innerHTML = `
                <h2>${diagrams[diagramKey].title}</h2>
                <p>${diagrams[diagramKey].description}</p>
            `;

            currentDiagram = diagramKey;
        }

        // Apply zoom
        function applyZoom() {
            const svg = diagramContainer.querySelector('svg');
            if (svg) {
                svg.style.transform = `scale(${currentZoom / 100})`;
                svg.style.transformOrigin = 'center';
                zoomLevel.textContent = `${currentZoom}%`;
            }
        }

        // Zoom in
        btnZoomIn.addEventListener('click', () => {
            currentZoom += 10;
            if (currentZoom > 200) currentZoom = 200;
            applyZoom();
        });

        // Zoom out
        btnZoomOut.addEventListener('click', () => {
            currentZoom -= 10;
            if (currentZoom < 50) currentZoom = 50;
            applyZoom();
        });

        // Reset zoom
        btnReset.addEventListener('click', () => {
            currentZoom = 100;
            applyZoom();
        });

        // Diagram selection
        btnArchitecture.addEventListener('click', () => loadDiagram('architecture'));
        btnLifecycle.addEventListener('click', () => loadDiagram('lifecycle'));
        btnSandbox.addEventListener('click', () => loadDiagram('sandbox'));
        btnExtension.addEventListener('click', () => loadDiagram('extension'));
        btnIntegration.addEventListener('click', () => loadDiagram('integration'));

        // Initial load
        loadDiagram('architecture');
    </script>
</body>
</html>